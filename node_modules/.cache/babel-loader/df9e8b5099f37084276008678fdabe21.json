{"ast":null,"code":"export function subscribeToProviderEvents(provider, onUpdate, onDisconnect, onChainChanged) {\n  if (provider === null || provider === void 0 ? void 0 : provider.on) {\n    const onConnectListener = info => {\n      if (info === null || info === void 0 ? void 0 : info.chainId) {\n        onUpdate({\n          chainId: Number(info.chainId)\n        });\n      }\n    };\n\n    provider.on('connect', onConnectListener);\n\n    const onDisconnectListener = error => {\n      onDisconnect(new Error(error));\n    };\n\n    provider.on('disconnect', onDisconnectListener);\n\n    const onChainChangedListener = chainId => {\n      onChainChanged === null || onChainChanged === void 0 ? void 0 : onChainChanged(Number(chainId));\n      onUpdate({\n        chainId: Number(chainId)\n      });\n    };\n\n    provider.on('chainChanged', onChainChangedListener);\n\n    const onAccountsChangedListener = accounts => {\n      onUpdate({\n        accounts\n      });\n    };\n\n    provider.on('accountsChanged', onAccountsChangedListener);\n    return () => {\n      provider.removeListener('connect', onConnectListener);\n      provider.removeListener('disconnect', onDisconnectListener);\n      provider.removeListener('chainChanged', onChainChangedListener);\n      provider.removeListener('accountsChanged', onAccountsChangedListener);\n    };\n  }\n\n  return () => undefined;\n}","map":{"version":3,"mappings":"AAGA,OAAM,SAAUA,yBAAV,CACJC,QADI,EAEJC,QAFI,EAGJC,YAHI,EAIJC,cAJI,EAIyC;EAE7C,IAAIH,QAAQ,SAAR,YAAQ,WAAR,GAAQ,MAAR,WAAQ,CAAEI,EAAd,EAAkB;IAChB,MAAMC,iBAAiB,GAAIC,IAAD,IAAgD;MACxE,IAAIA,IAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEC,OAAV,EAAmB;QACjBN,QAAQ,CAAC;UAAEM,OAAO,EAAEC,MAAM,CAACF,IAAI,CAACC,OAAN;QAAjB,CAAD,CAAR;MACD;IACF,CAJD;;IAKAP,QAAQ,CAACI,EAAT,CAAY,SAAZ,EAAuBC,iBAAvB;;IAEA,MAAMI,oBAAoB,GAAIC,KAAD,IAAqB;MAChDR,YAAY,CAAC,IAAIS,KAAJ,CAAUD,KAAV,CAAD,CAAZ;IACD,CAFD;;IAGAV,QAAQ,CAACI,EAAT,CAAY,YAAZ,EAA0BK,oBAA1B;;IAEA,MAAMG,sBAAsB,GAAIL,OAAD,IAA0B;MACvDJ,cAAc,SAAd,kBAAc,WAAd,GAAc,MAAd,iBAAc,CAAGK,MAAM,CAACD,OAAD,CAAT,CAAd;MACAN,QAAQ,CAAC;QAAEM,OAAO,EAAEC,MAAM,CAACD,OAAD;MAAjB,CAAD,CAAR;IACD,CAHD;;IAIAP,QAAQ,CAACI,EAAT,CAAY,cAAZ,EAA4BQ,sBAA5B;;IAEA,MAAMC,yBAAyB,GAAIC,QAAD,IAA6B;MAC7Db,QAAQ,CAAC;QAAEa;MAAF,CAAD,CAAR;IACD,CAFD;;IAGAd,QAAQ,CAACI,EAAT,CAAY,iBAAZ,EAA+BS,yBAA/B;IAEA,OAAO,MAAK;MACVb,QAAQ,CAACe,cAAT,CAAwB,SAAxB,EAAmCV,iBAAnC;MACAL,QAAQ,CAACe,cAAT,CAAwB,YAAxB,EAAsCN,oBAAtC;MACAT,QAAQ,CAACe,cAAT,CAAwB,cAAxB,EAAwCH,sBAAxC;MACAZ,QAAQ,CAACe,cAAT,CAAwB,iBAAxB,EAA2CF,yBAA3C;IACD,CALD;EAMD;;EAED,OAAO,MAAMG,SAAb;AACD","names":["subscribeToProviderEvents","provider","onUpdate","onDisconnect","onChainChanged","on","onConnectListener","info","chainId","Number","onDisconnectListener","error","Error","onChainChangedListener","onAccountsChangedListener","accounts","removeListener","undefined"],"sources":["/Users/qianyisheng/Desktop/web3/brownie_test/brownie_fund_me/front_end/node_modules/@usedapp/core/src/helpers/eip1193.ts"],"sourcesContent":["import { EventEmitter } from 'events'\nimport { Network } from '../providers'\n\nexport function subscribeToProviderEvents(\n  provider: EventEmitter | undefined,\n  onUpdate: (updatedNetwork: Partial<Network>) => void,\n  onDisconnect: (error: Error) => void,\n  onChainChanged?: (newChainId: number) => void\n) {\n  if (provider?.on) {\n    const onConnectListener = (info: { chainId: string } | undefined): void => {\n      if (info?.chainId) {\n        onUpdate({ chainId: Number(info.chainId) })\n      }\n    }\n    provider.on('connect', onConnectListener)\n\n    const onDisconnectListener = (error: any): void => {\n      onDisconnect(new Error(error))\n    }\n    provider.on('disconnect', onDisconnectListener)\n\n    const onChainChangedListener = (chainId: string): void => {\n      onChainChanged?.(Number(chainId))\n      onUpdate({ chainId: Number(chainId) })\n    }\n    provider.on('chainChanged', onChainChangedListener)\n\n    const onAccountsChangedListener = (accounts: string[]): void => {\n      onUpdate({ accounts })\n    }\n    provider.on('accountsChanged', onAccountsChangedListener)\n\n    return () => {\n      provider.removeListener('connect', onConnectListener)\n      provider.removeListener('disconnect', onDisconnectListener)\n      provider.removeListener('chainChanged', onChainChangedListener)\n      provider.removeListener('accountsChanged', onAccountsChangedListener)\n    }\n  }\n\n  return () => undefined\n}\n"]},"metadata":{},"sourceType":"module"}