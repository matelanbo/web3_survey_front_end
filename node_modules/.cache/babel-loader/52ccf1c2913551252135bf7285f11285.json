{"ast":null,"code":"export function subscribeToNewBlock(provider, chainId, dispatch, isActive) {\n  if (provider && chainId !== undefined && isActive) {\n    const update = blockNumber => dispatch({\n      chainId,\n      blockNumber\n    });\n\n    provider.on('block', update);\n    provider.getBlockNumber().then(blockNumber => update(blockNumber), err => {\n      console.error(err);\n    });\n    return () => {\n      provider.off('block', update);\n    };\n  }\n\n  return () => undefined;\n}","map":{"version":3,"mappings":"AAKA,OAAM,SAAUA,mBAAV,CACJC,QADI,EAEJC,OAFI,EAGJC,QAHI,EAIJC,QAJI,EAIa;EAEjB,IAAIH,QAAQ,IAAIC,OAAO,KAAKG,SAAxB,IAAqCD,QAAzC,EAAmD;IACjD,MAAME,MAAM,GAAIC,WAAD,IAAyBJ,QAAQ,CAAC;MAAED,OAAF;MAAWK;IAAX,CAAD,CAAhD;;IACAN,QAAQ,CAACO,EAAT,CAAY,OAAZ,EAAqBF,MAArB;IAEAL,QAAQ,CAACQ,cAAT,GAA0BC,IAA1B,CACGH,WAAD,IAAiBD,MAAM,CAACC,WAAD,CADzB,EAEGI,GAAD,IAAQ;MACNC,OAAO,CAACC,KAAR,CAAcF,GAAd;IACD,CAJH;IAOA,OAAO,MAAK;MACVV,QAAQ,CAACa,GAAT,CAAa,OAAb,EAAsBR,MAAtB;IACD,CAFD;EAGD;;EAED,OAAO,MAAMD,SAAb;AACD","names":["subscribeToNewBlock","provider","chainId","dispatch","isActive","undefined","update","blockNumber","on","getBlockNumber","then","err","console","error","off"],"sources":["/Users/qianyisheng/Desktop/web3/brownie_test/web3_survey/front_end/node_modules/@usedapp/core/src/providers/blockNumber/common/subscribeToNewBlock.ts"],"sourcesContent":["import { providers } from 'ethers'\nimport { ChainId } from '../../../constants'\nimport { Dispatch } from 'react'\nimport { BlockNumberChanged } from './reducer'\n\nexport function subscribeToNewBlock(\n  provider: providers.BaseProvider | undefined,\n  chainId: ChainId | undefined,\n  dispatch: Dispatch<BlockNumberChanged>,\n  isActive: boolean\n) {\n  if (provider && chainId !== undefined && isActive) {\n    const update = (blockNumber: number) => dispatch({ chainId, blockNumber })\n    provider.on('block', update)\n\n    provider.getBlockNumber().then(\n      (blockNumber) => update(blockNumber),\n      (err) => {\n        console.error(err)\n      }\n    )\n\n    return () => {\n      provider.off('block', update)\n    }\n  }\n\n  return () => undefined\n}\n"]},"metadata":{},"sourceType":"module"}